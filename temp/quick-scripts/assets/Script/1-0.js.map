{"version":3,"sources":["1-0.js"],"names":["cc","Class","extends","Component","properties","Space","default","displayName","lattice","type","Node","ghost","Setup_Win","AI_Lv","Integer","tooltip","Draw_edges","Draw_path","onLoad","Lattice_Arr","Next_Lattice_Arr","BG","find","windowSize","view","getVisibleSize","width","height","y","lattice_width","lattice_height","Math","floor","Lattice_Pool","NodePool","Lattice_Pool_Max","t","i","instantiate","put","Y_distance","X_distance","cos","PI","X_boundary","Y_boundary","e","n","c","a","o","get","parent","setPosition","push","r","Player_Action","grade","getComponent","Label","time","GamePause","start","length","random","Lattice_Farst_Off","Time_start","Player_start","scheduleOnce","color","Color","x","opacity","fadeTo","runAction","destroy","schedule","string","macro","REPEAT_FOREVER","Lattice_Off","target","Button","AudioSource","play","parseInt","Ghost_start","Next_Lattice_X","Next_Lattice_Y","s","moveTo","v2","splice","Game_Lost","Now_X","Now_Y","rationality","Find_way","Around_Arr","Allow_Move_Arr","s2","Game_Win","SetupWin","getChildByName","SetupWin_Button","Again","director","loadScene","GameEnd","game","end","Start_Arr","Note_Arr","Next_Start_Arr","Next_Note_Arr","Find_way_Over","Try_Around_Arr","q","concat","Find_way_End","Way_Arr","regID","regID2","result","JSON","stringify","match","list","item","Number"],"mappings":"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","file":"1-0.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["﻿cc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n        Space: {\r\n            default: 0,\r\n            displayName: \"空格子数量\"\r\n        },\r\n        lattice: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: \"地图格子\"\r\n        },\r\n        ghost: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: \"幽灵\"\r\n        },\r\n        Setup_Win: {\r\n            default: null,\r\n            type: cc.Node,\r\n            displayName: \"设置窗口\"\r\n        },\r\n        AI_Lv: {\r\n            default: 0,\r\n            type: cc.Integer,\r\n            displayName: \"AI智能水平\",\r\n            tooltip: \"上限10，下限0\"\r\n        },\r\n        Draw_edges: {\r\n            default: false,\r\n            displayName: \"绘制边缘\"\r\n        },\r\n        Draw_path:{\r\n        default: false,\r\n        displayName: \"绘制路径\"\r\n        }\r\n    },\r\n    onLoad() {\r\n        this.Lattice_Arr = [];\r\n        this.Next_Lattice_Arr = [];\r\n        this.BG = cc.find(\"Canvas/BG\");\r\n        this.windowSize = cc.view.getVisibleSize();\r\n        this.Setup_Win.width = this.BG.width * 3 / 5;\r\n        this.Setup_Win.height = this.Setup_Win.width * 0.6;\r\n        this.Setup_Win.y = this.windowSize.height;\r\n        var lattice_width = this.lattice.width;\r\n        var lattice_height = this.lattice.height;\r\n        this.lattice.width = Math.floor(this.BG.width/9);\r\n        this.lattice.height = Math.floor(lattice_height * ((this.BG.width / 9) / lattice_width));\r\n        this.Lattice_Pool = new cc.NodePool();\r\n        let Lattice_Pool_Max = 150;  //预制池上限\r\n        for (var t = 0; t < Lattice_Pool_Max; ++t) {\r\n            var i = cc.instantiate(this.lattice);\r\n            this.Lattice_Pool.put(i);\r\n        };\r\n        var Y_distance = this.lattice.height + Math.floor(this.lattice.height / 6);\r\n        var X_distance = Math.floor(Math.cos(2 * Math.PI / 360 * 30) * Y_distance);\r\n        this.X_distance = X_distance;\r\n        this.Y_distance = Y_distance;\r\n        var X_boundary = X_distance * 3 + X_distance / 2;\r\n        var Y_boundary = Y_distance * 5 + Y_distance / 3;\r\n        for (var e = 0, n = 0, c = 0; c < 9; c++) for (var a = 0; a < 7; a++) {\r\n            if (Y_distance * -a + n >= -Y_distance * 6 && Y_distance * a + n <= Y_distance*6) {\r\n                var o = this.Lattice_Pool.get();\r\n                o.parent = cc.find(\"Canvas/BG/Lattice_BG\");\r\n                o.setPosition(e, Y_distance * a + n);\r\n                e >= X_boundary || e <= -X_boundary || Y_distance * a + n > Y_boundary || Y_distance * a + n < -Y_boundary ? this.Lattice_Arr.push([e, Y_distance * a + n, 0, 1, o]) : this.Lattice_Arr.push([e, Y_distance * a + n, 0, 0, o]);\r\n            }\r\n            if (a > 0) {\r\n                var r = this.Lattice_Pool.get();\r\n                r.parent = cc.find(\"Canvas/BG/Lattice_BG\");\r\n                r.setPosition(e, Y_distance * -a + n);\r\n                e >= X_boundary || e <= -X_boundary || Y_distance * -a + n > Y_boundary || Y_distance * -a + n < -Y_boundary ? this.Lattice_Arr.push([e, Y_distance * -a + n, 0, 1, r]) : this.Lattice_Arr.push([e, Y_distance * -a + n, 0, 0, r]);\r\n            }\r\n            if (6 == a) {\r\n                if (0 == e) {\r\n                    n = 0 == n ? Y_distance/2 : 0;\r\n                    e += X_distance;\r\n                    break;\r\n                }\r\n                if (e > 1) {\r\n                    e = 0 - e;\r\n                    break;\r\n                }\r\n                if (e < -1) {\r\n                    n = 0 == n ? Y_distance/2 : 0;\r\n                    e = 0 - e + X_distance;\r\n                    break;\r\n                }\r\n            }\r\n        };\r\n        this.Player_Action = false;\r\n        this.grade = cc.find(\"Canvas/Grade/label\").getComponent(cc.Label);\r\n        this.time = cc.find(\"Canvas/Time\").getComponent(cc.Label);\r\n        this.windowSize = cc.view.getVisibleSize();\r\n        this.GamePause = false;\r\n        //cc.find(\"Canvas/BGM/bgm_main\").getComponent(cc.AudioSource).volume = .3;\r\n    },\r\n    start() {\r\n        this.ghost.parent = cc.find(\"Canvas/BG/Lattice_BG\");\r\n        this.ghost.setPosition(0, 0);\r\n        for (var t = 0; t < this.Space; t++) {\r\n            var i = this.Lattice_Arr.length, e = Math.floor(Math.random() * i);\r\n            if (e > 0) {\r\n                this.Lattice_Farst_Off(this.Lattice_Arr[e][4]);\r\n            } else {\r\n                t--;\r\n            }\r\n        };\r\n        this.Time_start();\r\n        this.Player_start();\r\n        if (this.Draw_edges) {\r\n            this.scheduleOnce(function () {\r\n                for (let i = 0; i < this.Lattice_Arr.length; i++) {\r\n                    if (this.Lattice_Arr[i][3] == 1 && this.Lattice_Arr[i][2] == 0) {\r\n                        //cc.log('改变颜色:' + this.Lattice_Arr[i]);\r\n                        this.Lattice_Arr[i][4].color = new cc.Color(60, 200, 60);\r\n                    }\r\n                }\r\n            }, 0.5);\r\n        }\r\n    },\r\n    Lattice_Farst_Off(t) {\r\n        for (var i = 0; i < this.Lattice_Arr.length; i++) t.x == this.Lattice_Arr[i][0] && t.y == this.Lattice_Arr[i][1] && 0 == this.Lattice_Arr[i][2] && (this.Lattice_Arr[i][2] = 1);\r\n        t.opacity = 255;\r\n        var e = cc.fadeTo(0.5, 0);\r\n        t.runAction(e);\r\n        this.scheduleOnce(function () {\r\n            t.destroy();\r\n        }, 0.5);\r\n    },\r\n    Time_start() {\r\n        var t = this, i = 0, e = 0;\r\n        t.schedule(function () {\r\n            if (!t.GamePause) {\r\n                if (60 == (i += 1)) {\r\n                    i = 0;\r\n                    e += 1;\r\n                }\r\n                60 == e && (e = 0);\r\n                t.time.string = e < 10 ? i < 10 ? \"时间: 0\" + e + \":0\" + i : \"时间: 0\" + e + \":\" + i : e < 10 ? \"时间: \" + e + \":0\" + i : \"时间: \" + e + \":\" + i;\r\n            }\r\n        }, 1, cc.macro.REPEAT_FOREVER, 0);\r\n    },\r\n    Player_start() {\r\n        this.Player_Action = !0;\r\n    },\r\n    Lattice_Off(t, i) {\r\n        var e = this, n = t.target, c = n.getComponent(cc.Button);\r\n        cc.find(\"Canvas/BGM/click2bgm\").getComponent(cc.AudioSource).play();\r\n        if (e.Player_Action) if (n.x == e.ghost.x && n.y == e.ghost.y) e.Player_Action = !0; else {\r\n            e.Player_Action = !1;\r\n            var a = parseInt(e.grade.string);\r\n            e.grade.string = a + 1;\r\n            c.destroy();\r\n            for (var o = 0; o < this.Lattice_Arr.length; o++) n.x == this.Lattice_Arr[o][0] && n.y == this.Lattice_Arr[o][1] && 0 == this.Lattice_Arr[o][2] && (this.Lattice_Arr[o][2] = 1);\r\n            n.opacity = 255;\r\n            var r = cc.fadeTo(0.5, 0);\r\n            n.runAction(r);\r\n            e.scheduleOnce(function () {\r\n                n.destroy();\r\n                e.Ghost_start();\r\n            }, 0.5);\r\n        }\r\n    },\r\n    Ghost_start() {\r\n        if (this.Next_Lattice_Arr.length > 0) {\r\n            var Next_Lattice_X = this.Next_Lattice_Arr[this.Next_Lattice_Arr.length - 1][0];\r\n            var Next_Lattice_Y = this.Next_Lattice_Arr[this.Next_Lattice_Arr.length - 1][1];\r\n            for (let i = 0; i < this.Lattice_Arr.length; i++) {\r\n                if (Next_Lattice_X == this.Lattice_Arr[i][0] && Next_Lattice_Y == this.Lattice_Arr[i][1]) {\r\n                    if (this.Lattice_Arr[i][2] == 0) {\r\n                        var s = cc.moveTo(0.4, cc.v2(Next_Lattice_X, Next_Lattice_Y));\r\n                        this.Next_Lattice_Arr.splice(this.Next_Lattice_Arr.length - 1, 1);\r\n                        this.ghost.runAction(s);\r\n                        this.scheduleOnce(function () {\r\n                            this.Player_Action = !0;\r\n                            this.ghost.x = Next_Lattice_X;\r\n                            this.ghost.y = Next_Lattice_Y;\r\n                            if (this.Lattice_Arr[i][3] == 1) {\r\n                                this.Game_Lost();\r\n                            }\r\n                        }, 0.5);\r\n                    } else {\r\n                        this.Next_Lattice_Arr = [];\r\n                        this.Ghost_start();\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            var Now_X = this.ghost.x;\r\n            var Now_Y = this.ghost.y;\r\n            var rationality = Math.floor(Math.random() * 10) + this.AI_Lv;\r\n            if (rationality >= 10) {\r\n                this.Find_way([[this.ghost.x, this.ghost.y]], [[this.ghost.x, this.ghost.y]]);\r\n            } else {\r\n                var Around_Arr = [[Now_X, Now_Y + this.Y_distance], [Now_X + this.X_distance, Now_Y + this.Y_distance / 2], [Now_X + this.X_distance, Now_Y - this.Y_distance / 2], [Now_X, Now_Y - this.Y_distance], [Now_X - this.X_distance, Now_Y - this.Y_distance / 2], [Now_X - this.X_distance, Now_Y + this.Y_distance / 2]];\r\n                var Allow_Move_Arr = [];\r\n                for (let i = 0; i < Around_Arr.length; i++) {\r\n                    for (let o = 0; o < this.Lattice_Arr.length; o++) {\r\n                        if (Around_Arr[i][0] == this.Lattice_Arr[o][0] && Around_Arr[i][1] == this.Lattice_Arr[o][1] && this.Lattice_Arr[o][2] == 0) {\r\n                            Allow_Move_Arr.push(Around_Arr[i]);\r\n                        }\r\n                    }\r\n                };\r\n                if (Allow_Move_Arr.length > 0) {\r\n                    var o = Allow_Move_Arr.length, r = Math.floor(Math.random() * o), s2 = cc.moveTo(0.4, cc.v2(Allow_Move_Arr[r][0], Allow_Move_Arr[r][1]));\r\n                    this.ghost.runAction(s2);\r\n                    this.scheduleOnce(function () {\r\n                        this.Player_Action = !0;\r\n                        this.ghost.x = Allow_Move_Arr[r][0];\r\n                        this.ghost.y = Allow_Move_Arr[r][1];\r\n                        this.Find_way([[this.ghost.x, this.ghost.y]], [[this.ghost.x, this.ghost.y]]);\r\n                        for (var t = 0; t < this.Lattice_Arr.length; t++) this.ghost.x == this.Lattice_Arr[t][0] && this.ghost.y == this.Lattice_Arr[t][1] && 1 == this.Lattice_Arr[t][3] && this.Game_Lost();\r\n                    }, 0.5);\r\n                } else this.Game_Win();\r\n            }\r\n        }\r\n    },\r\n    Game_Win() {\r\n        this.SetupWin(1);\r\n    },\r\n    Game_Lost() {\r\n        this.SetupWin(0);\r\n    },\r\n    SetupWin(t) {\r\n        cc.find(\"Canvas/BGM/click3bgm\").getComponent(cc.AudioSource).play();\r\n        this.Player_Action = !1;\r\n        this.GamePause = !0;\r\n        1 == t && (this.Setup_Win.getChildByName(\"top\").getComponent(cc.Label).string = \"成功抓到了幽灵！\");\r\n        0 == t && (this.Setup_Win.getChildByName(\"top\").getComponent(cc.Label).string = \"幽灵逃跑了！\");\r\n        cc.find(\"Canvas/Setup_Win/GameEnd/Background/Label\").getComponent(cc.Label).string = \"退出游戏\";\r\n        this.Setup_Win.x = 0;\r\n        this.Setup_Win.y = 0;\r\n    },\r\n    SetupWin_Button(t, i) {\r\n        cc.find(\"Canvas/BGM/click3bgm\").getComponent(cc.AudioSource).play();\r\n        this.Player_Action = !1;\r\n        this.GamePause = !0;\r\n        this.Setup_Win.getChildByName(\"top\").getComponent(cc.Label).string = \"暂停游戏\";\r\n        cc.find(\"Canvas/Setup_Win/GameEnd/Background/Label\").getComponent(cc.Label).string = \"继续游戏\";\r\n        this.Setup_Win.x = 0;\r\n        this.Setup_Win.y = 0;\r\n    },\r\n    Again() {\r\n        cc.find(\"Canvas/BGM/click3bgm\").getComponent(cc.AudioSource).play();\r\n        this.scheduleOnce(function () {\r\n            cc.director.loadScene(\"Scene/1-0\");\r\n        }, 0.5);\r\n    },\r\n    GameEnd() {\r\n        cc.find(\"Canvas/BGM/click3bgm\").getComponent(cc.AudioSource).play();\r\n        if (\"继续游戏\" == cc.find(\"Canvas/Setup_Win/GameEnd/Background/Label\").getComponent(cc.Label).string) {\r\n            this.GamePause = !1;\r\n            this.Player_Action = !0;\r\n            this.Setup_Win.y = this.windowSize.height;\r\n            cc.find(\"Canvas/Setup_Win/GameEnd/Background/Label\").getComponent(cc.Label).string = \"退出游戏\";\r\n        } else cc.game.end();\r\n    },\r\n    Find_way(Start_Arr, Note_Arr) {\r\n        var Next_Start_Arr = [];\r\n        var Next_Note_Arr = Note_Arr;\r\n        var Find_way_Over = false;\r\n        this.Next_Lattice_Arr = [];\r\n        //cc.log('执行数组：' + JSON.stringify(Start_Arr));\r\n        //cc.log('以排除数组：' + JSON.stringify(Note_Arr));\r\n        if (Start_Arr.length > 0) {\r\n            for (let i = 0; i < Start_Arr.length; i++) {\r\n                let Try_Around_Arr = [[Start_Arr[i][0], Start_Arr[i][1] + this.Y_distance], [Start_Arr[i][0] + this.X_distance, Start_Arr[i][1] + this.Y_distance / 2], [Start_Arr[i][0] + this.X_distance, Start_Arr[i][1] - this.Y_distance / 2], [Start_Arr[i][0], Start_Arr[i][1] - this.Y_distance], [Start_Arr[i][0] - this.X_distance, Start_Arr[i][1] - this.Y_distance / 2], [Start_Arr[i][0] - this.X_distance, Start_Arr[i][1] + this.Y_distance / 2]];\r\n                for (let o = 0; o < Try_Around_Arr.length; o++) {\r\n                    for (let q = 0; q < Note_Arr.length; q++) {\r\n                        if (Try_Around_Arr[o][0] == Note_Arr[q][0] && Try_Around_Arr[o][1] == Note_Arr[q][1]) {\r\n                            Try_Around_Arr.splice(o, 1);\r\n                            o--;\r\n                            break;\r\n                        }\r\n                    }\r\n                };\r\n                Next_Note_Arr = Note_Arr.concat(Try_Around_Arr);\r\n                Note_Arr = Next_Note_Arr;\r\n                for (let o = 0; o < Try_Around_Arr.length; o++) {\r\n                    for (let q = 0; q < this.Lattice_Arr.length; q++) {\r\n                        if (Try_Around_Arr[o][0] == this.Lattice_Arr[q][0] && Try_Around_Arr[o][1] == this.Lattice_Arr[q][1] && this.Lattice_Arr[q][2] == 0 && this.Lattice_Arr[q][3] == 1) {\r\n                            this.Find_way_End([Try_Around_Arr[o][0], Try_Around_Arr[o][1], Start_Arr[i]]);\r\n                            return;\r\n                        };\r\n                        if (Try_Around_Arr[o][0] == this.Lattice_Arr[q][0] && Try_Around_Arr[o][1] == this.Lattice_Arr[q][1] && this.Lattice_Arr[q][2] == 1) {\r\n                            Try_Around_Arr.splice(o, 1);\r\n                            o--;\r\n                            break;\r\n                        }\r\n                    }\r\n                };\r\n                for (let o = 0; o < Try_Around_Arr.length; o++) {\r\n                    Next_Start_Arr.push([Try_Around_Arr[o][0], Try_Around_Arr[o][1], Start_Arr[i]]);\r\n                };\r\n                if (i == Start_Arr.length - 1) {\r\n                    this.Find_way(Next_Start_Arr, Next_Note_Arr);\r\n                };\r\n            };\r\n        } else {\r\n            this.Game_Win();\r\n        }\r\n    },\r\n    Find_way_End(Way_Arr) {\r\n        let regID = /\\[(.+?)\\,(.+?)\\,/g;\r\n        let regID2 = /\\[(.+?)\\,(.+?)\\,/;\r\n        var result = JSON.stringify(Way_Arr).match(regID);\r\n        var list = [];\r\n        for (var i = 0; i < result.length; i++) {\r\n            var item = result[i];\r\n            list.push([Number(item.match(regID2)[1]), Number(item.match(regID2)[2])]);\r\n        };\r\n        this.Next_Lattice_Arr = list;\r\n        //cc.log('寻路结果：' + JSON.stringify(list));\r\n        if (this.Draw_path) {\r\n            for (let i = 0; i < list.length; i++) {\r\n                for (let o = 0; o < this.Lattice_Arr.length; o++) {\r\n                    if (list[i][0] == this.Lattice_Arr[o][0] && list[i][1] == this.Lattice_Arr[o][1] && this.Lattice_Arr[o][2] == 0) {\r\n                        this.Lattice_Arr[o][4].color = new cc.Color(60, 200, 60);\r\n                    }\r\n                }\r\n            };\r\n        }\r\n        if (!this.Player_Action) {\r\n            this.Ghost_start();\r\n        }\r\n    }\r\n    // update (dt) {},\r\n});\r\n"]}